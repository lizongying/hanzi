class Zi{constructor(config={}){const{fit:fit=0,boxSize:boxSize=100,borderSize:borderSize="1px",borderSizeBold:borderSizeBold="2px",fontSize:fontSize=80,fontFamily:fontFamily="serif",borderColorOut:borderColorOut="#006400",borderColorIn:borderColorIn="#FF0000",mode:mode=0,style:// '0V/1H'
style=0,rowNum:// '0米/1田/2口/3一'
rowNum=8,columnNum:columnNum=8,container:container="#container"}=config;this.config={fit:fit,boxSize:boxSize,borderSize:borderSize,borderSizeBold:borderSizeBold,fontSize:fontSize,fontFamily:fontFamily,borderColorOut:borderColorOut,borderColorIn:borderColorIn,mode:mode,style:style,rowNum:rowNum,columnNum:columnNum,container:container};this.container=document.querySelector(this.config.container)||this.createContainer();this.updateSizes();this.full();this.updateStyle()}createContainer(){const container=document.createElement("div");container.id="container";document.body.appendChild(container);this.config.container="#container";return container}updateSizes(){const dimension=this.config.mode===1?this.container.clientWidth:this.container.clientHeight;const bs=Math.floor(dimension/this.config.columnNum);const fs=Math.floor(bs*4/5);this.config.boxSize=bs;this.config.fontSize=fs;const v=`${bs*this.config.columnNum}px`;if(this.config.mode===1){this.container.style.width=v;this.container.style.height=`100%`}else{this.container.style.height=v;this.container.style.width=`100%`}}setFit(fit){this.config.fit=fit;if(fit===1){const v1=this.config.boxSize*this.config.rowNum+Math.floor(this.config.fontSize/2)*(this.config.rowNum-1);if(this.config.mode===1){if(v1>document.body.clientHeight-20){this.container.style.width=`${this.container.clientWidth*(document.body.clientHeight-20)/v1}px`}}else{if(v1>document.body.clientWidth-20){this.container.style.height=`${this.container.clientHeight*(document.body.clientWidth-20)/v1}px`}}}else{if(this.config.mode===1){this.container.style.width=`100%`}else{this.container.style.height=`100%`}}this.updateSizes();this.updateStyle()}setMode(mode){this.config.mode=mode;this.updateSizes();this.updateStyle()}setRowNum(num){this.config.rowNum=num;this.updateSizes();this.full();this.updateStyle()}setColumnNum(num){this.config.columnNum=num;this.updateSizes();this.full();this.updateStyle()}setBorderColorOut(color){this.config.borderColorOut=color;this.updateStyle()}setBorderColorIn(color){this.config.borderColorIn=color;this.updateStyle()}setStyle(style){this.config.style=style;this.updateStyle()}create(index,t){let character=this.container.children[index];if(character){if(t){character.querySelector(".t").textContent=t}}else{const character=document.createElement("div");character.className="c";for(let i=0;i<4;i++){const line=document.createElement("i");line.className=`l${i}`;character.appendChild(line)}const text=document.createElement("span");text.className="t";text.textContent=t;character.appendChild(text);this.container.appendChild(character)}}show(content){content.split("").forEach(((index,t)=>{this.create(t,index)}))}full(){const count=this.config.rowNum*this.config.columnNum;while(this.container.children.length>count){this.container.removeChild(this.container.lastChild)}for(let t=0;t<count;t++){this.create(t)}}updateStyle(){if(!this.style){this.style=document.createElement("style");document.head.appendChild(this.style)}this.style.textContent=`\n        ${this.config.container} {\n            display: flex;\n            align-content: flex-start;\n            flex-wrap: wrap;\n            flex-direction: ${this.config.mode===1?"row":"column"};\n            border-${this.config.mode===1?"left":"top"}: ${this.config.borderSize} solid ${this.config.borderColorOut};\n            border-${this.config.mode===1?"right":"bottom"}: ${this.config.borderSize} solid ${this.config.borderColorOut};\n            direction: ${this.config.mode===1?"ltr":"rtl"};\n            font-size: ${this.config.fontSize}px;\n            font-family: ${this.config.fontFamily};\n            overflow: scroll;\n        }\n\n        .c {\n            box-sizing: border-box;\n            ${this.config.mode===1?"margin-top: 0":"margin-right: 0"};\n            ${this.config.mode===1?"margin-bottom: .5em":"margin-left: .5em"};\n            border-right: ${this.config.mode===1?this.config.style>2?0:this.config.borderSize:this.config.borderSizeBold} solid ${this.config.borderColorOut};\n            border-left: ${this.config.mode===1?this.config.style>2?0:this.config.borderSize:this.config.borderSizeBold} solid ${this.config.borderColorOut};\n            border-bottom: ${this.config.mode===1?this.config.borderSizeBold:this.config.style>2?0:this.config.borderSize} solid ${this.config.borderColorOut};\n            border-top: ${this.config.mode===1?this.config.borderSizeBold:this.config.style>2?0:this.config.borderSize} solid ${this.config.borderColorOut};\n            width: ${this.config.boxSize}px;\n            height: ${this.config.boxSize}px;\n            display: flex;\n            overflow: hidden;\n            justify-content: center;\n            position: relative;\n        }\n        \n        .c:nth-last-child(-n+${this.config.columnNum}) {\n            ${this.config.mode===1?"margin-top: 0":"margin-right: 0"};\n            ${this.config.mode===1?"margin-bottom: 0":"margin-left: 0"};\n        }\n        \n        .l0, .l1, .l2, .l3 {\n            position: absolute;\n            left: 0;\n            top: 0;\n            box-sizing: border-box;\n            background-color: transparent;\n        }\n        \n        .l0, .l1 {\n            width: 141.4%;\n            height: 141.4%;\n        }\n        \n        .l0 {\n            border-bottom: ${this.config.borderSize} dashed ${this.config.borderColorIn};\n            transform: translateX(-50%) translateY(-50%) rotate(-45deg);\n        }\n        \n        .l1 {\n            border-left: ${this.config.borderSize} dashed ${this.config.borderColorIn};\n            transform: translateX(20%) translateY(-50%) rotate(-45deg);\n        }\n        \n        .l2, .l3 {\n            width: 100%;\n            height: 100%;\n        }\n        \n        .l2 {\n            border-left: ${this.config.borderSize} dashed ${this.config.borderColorIn};\n            transform: translateX(50%);\n        }\n        \n        .l3 {\n            border-top: ${this.config.borderSize} dashed ${this.config.borderColorIn};\n            transform: translateY(50%);\n        }\n\n        .t {\n            line-height: ${this.config.boxSize}px;\n            height: 0;\n            z-index: 1;\n        }\n        \n        ${this.config.style>0?".l0, .l1 {display: none}":".l0, .l1 {display: block}"}\n          \n        ${this.config.style>1?".l2, .l3 {display: none}":".l2, .l3 {display: block}"}\n        \n        @media print {\n            @page {\n                size: A4 ${this.config.mode===1?"portrait":"landscape"};\n            }\n        }\n`;document.head.appendChild(this.style)}}